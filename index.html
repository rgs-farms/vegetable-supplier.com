<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Vegetable Supplier</title>
  <meta name="description" content="Fresh vegetables delivered. Browse, search and order from our catalogue." />
  <style>
    :root{
      --accent:#2b8a3e;
      --muted:#6b7280;
      --bg:#f7faf7;
      --card:#ffffff;
      --radius:12px;
      --shadow: 0 6px 18px rgba(11,15,10,0.06);
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:linear-gradient(180deg,#f7fff7, #f2faf2);}
    .container{max-width:1100px;margin:28px auto;padding:20px;}
    header{display:flex;align-items:center;justify-content:space-between;gap:16px;margin-bottom:18px}
    .brand{display:flex;gap:12px;align-items:center}
    .logo{width:56px;height:56px;border-radius:10px;background:var(--accent);display:flex;align-items:center;justify-content:center;color:white;font-weight:700;box-shadow:var(--shadow)}
    h1{font-size:18px;margin:0}
    nav{display:flex;gap:12px;align-items:center}
    nav a{color:var(--muted);text-decoration:none;padding:8px;border-radius:8px}
    nav a:hover{background:rgba(43,138,62,0.08);color:var(--accent)}
    .controls{display:flex;gap:12px;align-items:center;margin-bottom:16px;flex-wrap:wrap}
    .search{
      display:flex;gap:8px;align-items:center;background:var(--card);padding:8px 12px;border-radius:999px;box-shadow:var(--shadow);
      border:1px solid rgba(11,15,10,0.04);min-width:260px;
    }
    .search input{border:0;outline:none;font-size:14px;background:transparent}
    .select, .btn {background:var(--card);border:1px solid rgba(11,15,10,0.04);padding:8px 12px;border-radius:10px;cursor:pointer;box-shadow:var(--shadow)}
    .btn.primary{background:var(--accent);color:white;border:0}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:16px}
    .card{background:var(--card);border-radius:var(--radius);padding:12px;box-shadow:var(--shadow);display:flex;flex-direction:column;gap:10px}
    .thumb{height:140px;border-radius:10px;background-size:cover;background-position:center}
    .meta{display:flex;justify-content:space-between;align-items:center;gap:8px}
    .price{font-weight:700;color:var(--accent)}
    .muted{color:var(--muted);font-size:13px}
    .cart-btn{
      position:fixed;right:20px;bottom:20px;background:var(--accent);color:white;padding:12px 16px;border-radius:999px;box-shadow:0 12px 30px rgba(43,138,62,0.18);display:flex;gap:8px;align-items:center;cursor:pointer;border:0
    }
    .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.36);display:none;align-items:center;justify-content:center;padding:20px}
    .modal{width:100%;max-width:560px;background:var(--card);padding:18px;border-radius:12px;box-shadow:var(--shadow)}
    .modal h2{margin:0 0 12px 0}
    .form-row{display:flex;gap:8px;margin-bottom:8px}
    .form-row input,.form-row textarea{flex:1;padding:10px;border-radius:8px;border:1px solid #e6e6e6;resize:vertical}
    .close{background:transparent;border:0;color:var(--muted);cursor:pointer}
    footer{margin-top:22px;color:var(--muted);font-size:13px;text-align:center}
    @media (max-width:520px){
      header{flex-direction:column;align-items:flex-start;gap:10px}
      .controls{flex-direction:column;align-items:stretch}
      .search{min-width:100%}
    }
  </style>
</head>
<body>
  <div class="container" id="app">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true">VS</div>
        <div>
          <h1>Vegetable Supplier</h1>
          <div class="muted">Fresh local produce — delivered</div>
        </div>
      </div>

      <nav aria-label="Main navigation">
        <a href="#" id="link-products">Products</a>
        <a href="#" id="link-about">About</a>
        <a href="#" id="link-contact">Contact</a>
      </nav>
    </header>

    <section class="controls" aria-label="Search and filters">
      <div class="search" role="search" aria-label="Search products">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M21 21l-4.35-4.35" stroke="#6b7280" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/><circle cx="11" cy="11" r="6" stroke="#6b7280" stroke-width="1.6"/></svg>
        <input id="search" type="search" placeholder="Search vegetables, e.g. carrots" aria-label="Search products">
      </div>

      <select id="category" class="select" aria-label="Filter by category">
        <option value="">All categories</option>
      </select>

      <button class="btn" id="sort">Sort: Popular</button>
      <button class="btn primary" id="contactBtn">Contact Us</button>
    </section>

    <main>
      <section aria-labelledby="catalog-heading">
        <h2 id="catalog-heading" class="muted" style="margin:6px 0 12px 0">Available products</h2>
        <div id="grid" class="grid" role="list" aria-live="polite"></div>
        <div id="empty" class="muted" style="display:none;margin-top:12px">No products match your search.</div>
      </section>
    </main>

    <footer>
      &copy; <span id="year"></span> Vegetable Supplier — sustainably sourced
    </footer>
  </div>

  <button class="cart-btn" id="cartBtn" aria-label="Open cart">
    <span id="cartCount">0</span>
    <span>Cart</span>
  </button>

  <div class="modal-backdrop" id="modalBackdrop" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal" role="document">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
        <h2>Contact us</h2>
        <button class="close" id="modalClose" aria-label="Close contact form">&times;</button>
      </div>
      <form id="contactForm">
        <div class="form-row">
          <input type="text" id="name" placeholder="Your name" required>
          <input type="email" id="email" placeholder="Email" required>
        </div>
        <div style="margin-bottom:8px">
          <textarea id="message" rows="4" placeholder="Message" required style="width:100%"></textarea>
        </div>
        <div style="display:flex;gap:8px;justify-content:flex-end">
          <button type="button" class="btn" id="modalCancel">Cancel</button>
          <button type="submit" class="btn primary">Send</button>
        </div>
      </form>
    </div>
  </div>

  <script>
    const PRODUCTS = [
      { id: 'p1', name: 'Carrots', category: 'Root', price: 2.49, unit: 'kg', img: 'https://images.unsplash.com/photo-1567306226416-28f0efdc88ce?q=80&w=800&auto=format&fit=crop&ixlib=rb-4.0.3&s=9b4120d3f96764d86a127c0b7c59b9b1' },
      { id: 'p2', name: 'Spinach', category: 'Leafy', price: 1.99, unit: 'bunch', img: 'https://images.unsplash.com/photo-1524594154907-65a6e3f5b5a6?q=80&w=800&auto=format&fit=crop&ixlib=rb-4.0.3&s=d8f4d3bca5ca19e2d3d6b3c2c57a4f05' },
      { id: 'p3', name: 'Tomatoes', category: 'Fruit', price: 3.49, unit: 'kg', img: 'https://images.unsplash.com/photo-1567306301408-9b74779a11af?q=80&w=800&auto=format&fit=crop&ixlib=rb-4.0.3&s=5d3a3f6e7d7de2a3c8a7b7c4e2d1c6b9' },
      { id: 'p4', name: 'Potatoes', category: 'Root', price: 1.29, unit: 'kg', img: 'https://images.unsplash.com/photo-1518976024611-4886f36f0f0d?q=80&w=800&auto=format&fit=crop&ixlib=rb-4.0.3&s=3a83b3ce7b0f9a1b5e3a6f90df2c2e5f' },
      { id: 'p5', name: 'Kale', category: 'Leafy', price: 2.99, unit: 'bunch', img: 'https://images.unsplash.com/photo-1547516508-4a7f51b977f6?q=80&w=800&auto=format&fit=crop&ixlib=rb-4.0.3&s=2f6a9d1391e9ff2c1d6f2aa11be2b82a' }
    ];

    const state = {
      products: PRODUCTS,
      query: '',
      category: '',
      sort: 'popular',
      cart: JSON.parse(localStorage.getItem('cart') || '{}')
    };

    function $(sel){return document.querySelector(sel)}
    function formatPrice(v){return '$' + v.toFixed(2)}

    document.addEventListener('DOMContentLoaded', () => {
      $('#year').textContent = new Date().getFullYear();
      populateCategories();
      renderGrid();
      hookControls();
      updateCartUI();
    });

    function populateCategories(){
      const cats = Array.from(new Set(PRODUCTS.map(p => p.category))).sort();
      const sel = $('#category');
      cats.forEach(c => {
        const opt = document.createElement('option');
        opt.value = c;
        opt.textContent = c;
        sel.appendChild(opt);
      });
    }

    function renderGrid(){
      const grid = $('#grid');
      grid.innerHTML = '';
      const q = state.query.trim().toLowerCase();
      let items = state.products.filter(p => {
        return (!state.category || p.category === state.category) &&
               (!q || p.name.toLowerCase().includes(q) || p.category.toLowerCase().includes(q));
      });

      if(state.sort === 'price-asc') items.sort((a,b)=>a.price-b.price);
      else if(state.sort === 'price-desc') items.sort((a,b)=>b.price-a.price);

      if(items.length === 0) $('#empty').style.display = 'block';
      else $('#empty').style.display = 'none';

      for(const p of items){
        const el = document.createElement('div');
        el.className = 'card';
        el.setAttribute('role','listitem');
        el.innerHTML = `
          <div class="thumb" style="background-image:url('${p.img}')" aria-hidden="true"></div>
          <div style="display:flex;flex-direction:column;gap:4px">
            <div style="display:flex;justify-content:space-between;align-items:center">
              <div style="font-weight:600">${p.name}</div>
              <div class="price">${formatPrice(p.price)}</div>
            </div>
            <div class="muted">${p.category} · ${p.unit}</div>
          </div>
          <div style="margin-top:auto;display:flex;gap:8px;align-items:center">
            <input aria-label="Quantity" type="number" min="1" value="1" style="width:70px;padding:8px;border-radius:8px;border:1px solid #eee">
            <button class="btn primary" data-id="${p.id}" type="button">Add</button>
          </div>
        `;
        const addBtn = el.querySelector('button');
        const qtyInput = el.querySelector('input');
        addBtn.addEventListener('click', () => {
          const count = Math.max(1, parseInt(qtyInput.value || '1', 10));
          addToCart(p.id, count);
        });
        grid.appendChild(el);
      }
    }

    function hookControls(){
      $('#search').addEventListener('input', e => { state.query = e.target.value; renderGrid(); });
      $('#category').addEventListener('change', e => { state.category = e.target.value; renderGrid(); });
      $('#sort').addEventListener('click', () => {
        if(state.sort === 'popular'){ state.sort = 'price-asc'; $('#sort').textContent = 'Sort: Price ↑'; }
        else if(state.sort === 'price-asc'){ state.sort = 'price-desc'; $('#sort').textContent = 'Sort: Price ↓'; }
        else { state.sort = 'popular'; $('#sort').textContent = 'Sort: Popular'; }
        renderGrid();
      });

      $('#contactBtn').addEventListener('click', openModal);
      $('#modalClose').addEventListener('click', closeModal);
      $('#modalCancel').addEventListener('click', closeModal);
      $('#modalBackdrop').addEventListener('click', (ev)=>{ if(ev.target === $('#modalBackdrop')) closeModal(); });
      $('#contactForm').addEventListener('submit', (ev)=>{ ev.preventDefault(); alert('Message sent — thank you!'); closeModal(); $('#contactForm').reset(); });

      $('#cartBtn').addEventListener('click', showCart);
    }

    function addToCart(id, qty=1){
      state.cart[id] = (state.cart[id] || 0) + qty;
      localStorage.setItem('cart', JSON.stringify(state.cart));
      updateCartUI();
      const count = Object.values(state.cart).reduce((s,n)=>s+n,0);
      showToast(`${qty} added — Cart now ${count} item(s)`);
    }

    function updateCartUI(){
      const count = Object.values(state.cart).reduce((s,n)=>s+n,0);
      $('#cartCount').textContent = count;
    }

    function showCart(){
      const entries = Object.entries(state.cart);
      if(entries.length === 0){ alert('Your cart is empty.'); return; }
      const lines = entries.map(([id,qty]) => {
        const p = PRODUCTS.find(x=>x.id===id);
        return `${p.name} × ${qty} — ${formatPrice(p.price*qty)}`;
      });
      const total = entries.reduce((s,[id,qty])=> s + (PRODUCTS.find(p=>p.id===id).price * qty), 0);
      const confirmed = confirm(lines.join('\n') + '\n\nTotal: ' + formatPrice(total) + '\n\nProceed to checkout?');
      if(confirmed){
        alert('Checkout complete — thank you!');
        state.cart = {};
        localStorage.removeItem('cart');
        updateCartUI();
      }
    }

    let toastTimer = null;
    function showToast(text){
      let t = document.getElementById('toast');
      if(!t){
        t = document.createElement('div');
        t.id = 'toast';
        t.style.position = 'fixed';
        t.style.left = '50%';
        t.style.bottom = '90px';
        t.style.transform = 'translateX(-50%)';
        t.style.background = 'rgba(0,0,0,0.75)';
        t.style.color = 'white';
        t.style.padding = '10px 14px';
        t.style.borderRadius = '10px';
        t.style.fontSize = '14px';
        t.style.zIndex = 9999;
        document.body.appendChild(t);
      }
      t.textContent = text;
      t.style.opacity = '1';
      if(toastTimer) clearTimeout(toastTimer);
      toastTimer = setTimeout(()=> t.style.opacity = '0', 2200);
    }

    function openModal(){
      const b = $('#modalBackdrop');
      b.style.display = 'flex';
      b.setAttribute('aria-hidden','false');
      $('#name').focus();
    }
    function closeModal(){
      const b = $('#modalBackdrop');
      b.style.display = 'none';
      b.setAttribute('aria-hidden','true');
    }
  </script>
</body>
</html>